# BerthCare Environment Configuration Template
# Copy this file to .env and update values as needed
# Philosophy: "Intelligent defaults" - Works out of the box for local development

# =============================================================================
# APPLICATION CONFIGURATION
# =============================================================================
NODE_ENV=development
PORT=3000
API_VERSION=v1

# =============================================================================
# DATABASE CONFIGURATION - PostgreSQL 15
# =============================================================================
# Server source of truth: ACID compliance, relational integrity
DATABASE_HOST=localhost
DATABASE_PORT=5432
DATABASE_NAME=berthcare_dev
DATABASE_USER=berthcare
DATABASE_PASSWORD=berthcare_local_dev_password
DATABASE_SSL=false
DATABASE_POOL_MIN=2
DATABASE_POOL_MAX=10
DATABASE_CONNECTION_TIMEOUT=30000

# Database URL (alternative to individual settings)
DATABASE_URL=postgresql://berthcare:berthcare_local_dev_password@localhost:5432/berthcare_dev

# Read Replica Configuration (optional - for production scalability)
DATABASE_READ_REPLICA_ENABLED=false
DATABASE_READ_REPLICA_HOST=localhost
DATABASE_READ_REPLICA_PORT=5432

# =============================================================================
# REDIS CONFIGURATION - Redis 7
# =============================================================================
# Performance layer: Session management, API caching, rate limiting
REDIS_HOST=localhost
REDIS_PORT=6379
REDIS_PASSWORD=berthcare_redis_password
REDIS_DB=0
REDIS_TTL=900

# Redis URL (alternative to individual settings)
REDIS_URL=redis://:berthcare_redis_password@localhost:6379/0

# =============================================================================
# AWS S3 CONFIGURATION - LocalStack for Local Development
# =============================================================================
# File storage: Photos, signatures, documents
AWS_REGION=ca-central-1
AWS_ACCESS_KEY_ID=test
AWS_SECRET_ACCESS_KEY=test
AWS_S3_BUCKET=berthcare-dev
AWS_S3_ENDPOINT=http://localhost:4566
AWS_S3_FORCE_PATH_STYLE=true

# Production S3 settings (comment out for local development)
# AWS_ACCESS_KEY_ID=your_production_access_key
# AWS_SECRET_ACCESS_KEY=your_production_secret_key
# AWS_S3_BUCKET=berthcare-production
# AWS_S3_ENDPOINT=https://s3.ca-central-1.amazonaws.com
# AWS_S3_FORCE_PATH_STYLE=false

# =============================================================================
# AUTHENTICATION & SECURITY
# =============================================================================
# JWT tokens: Stateless, scalable, secure
JWT_SECRET=your_jwt_secret_change_in_production_min_32_chars
JWT_ACCESS_TOKEN_EXPIRY=1h
JWT_REFRESH_TOKEN_EXPIRY=30d
BCRYPT_ROUNDS=10

# Session configuration
SESSION_SECRET=your_session_secret_change_in_production_min_32_chars
SESSION_MAX_AGE=86400000

# =============================================================================
# RATE LIMITING
# =============================================================================
# Prevent abuse, ensure fair usage
RATE_LIMIT_WINDOW_MS=900000
RATE_LIMIT_MAX_REQUESTS=100
RATE_LIMIT_LOGIN_MAX=5

# =============================================================================
# TWILIO CONFIGURATION - Voice & SMS
# =============================================================================
# Communication layer: Voice calls for urgent alerts, SMS for family portal
TWILIO_ACCOUNT_SID=your_twilio_account_sid
TWILIO_AUTH_TOKEN=your_twilio_auth_token
TWILIO_PHONE_NUMBER=+1234567890
TWILIO_VOICE_URL=https://api.berthcare.ca/v1/voice/webhook
TWILIO_SMS_URL=https://api.berthcare.ca/v1/sms/webhook

# =============================================================================
# EXPO PUSH NOTIFICATIONS
# =============================================================================
# Care coordination: Push notifications for alerts
EXPO_ACCESS_TOKEN=your_expo_access_token

# =============================================================================
# LOGGING & MONITORING
# =============================================================================
LOG_LEVEL=debug
LOG_FORMAT=json
LOG_FILE_PATH=./logs/app.log

# Sentry error tracking (optional)
SENTRY_DSN=your_sentry_dsn
SENTRY_ENVIRONMENT=development

# =============================================================================
# CORS CONFIGURATION
# =============================================================================
# Secure cross-origin requests
CORS_ORIGIN=http://localhost:19006,exp://localhost:19000
CORS_CREDENTIALS=true

# =============================================================================
# FILE UPLOAD CONFIGURATION
# =============================================================================
MAX_FILE_SIZE=10485760
ALLOWED_FILE_TYPES=image/jpeg,image/png,image/heic,application/pdf

# =============================================================================
# SYNC CONFIGURATION
# =============================================================================
# Background sync: Intelligent scheduling, exponential backoff
SYNC_BATCH_SIZE=50
SYNC_RETRY_ATTEMPTS=3
SYNC_RETRY_DELAY=5000

# =============================================================================
# FEATURE FLAGS
# =============================================================================
ENABLE_FAMILY_PORTAL=true
ENABLE_VOICE_ALERTS=true
ENABLE_SMART_DATA_REUSE=true
ENABLE_GPS_AUTO_CHECKIN=true

# =============================================================================
# DEVELOPMENT TOOLS
# =============================================================================
# Enable development-only features
ENABLE_API_DOCS=true
ENABLE_DEBUG_ROUTES=true
ENABLE_QUERY_LOGGING=false

# =============================================================================
# MONITORING & OBSERVABILITY
# =============================================================================
# CloudWatch metrics and Sentry error tracking
SENTRY_DSN=https://your-dsn@sentry.io/project-id
SENTRY_TRACES_SAMPLE_RATE=0.1
SENTRY_PROFILES_SAMPLE_RATE=0.1
CLOUDWATCH_ENABLED=false
RELEASE_VERSION=1.0.0
